!function(r){"use strict";var t=["area","base","br","col","embed","hr","img","input","keygen","link","menuitem","meta","param","source","track","wbr"],e=function(r,e){var e=e||{},r=(r||"").trim(),a="",i=0,n=!1,c="",p=[],u="",o=0,h=0,f=0,g=0,T=1,S=2;if(e.TruncateBy=void 0!==e.TruncateBy&&"string"==typeof e.TruncateBy&&e.TruncateBy.match(/(word(s)?|character(s)?|paragraph(s)?)/)?e.TruncateBy.toLowerCase():"words",e.TruncateLength=void 0===e.TruncateLength||"number"!=typeof e.TruncateLength?50:e.TruncateLength,e.StripHTML=void 0===e.StripHTML||"boolean"!=typeof e.StripHTML?!1:e.StripHTML,e.Strict=void 0===e.Strict||"boolean"!=typeof e.Strict?!0:e.Strict,e.Suffix=void 0===e.Suffix||"string"!=typeof e.Suffix?"...":e.Suffix,""===r||r.length<=e.TruncateLength&&e.StripHTML===!1)return r;e.StripHTML&&!e.TruncateBy.match(/(paragraph(s)?)/)&&(r=String(r).replace(/<!--(.*?)-->/gm,"").replace(/<\/?[^>]+>/gi,"")),r=String(r).replace(/<\/p>(\r?\n)+<p>/gm,"</p><p>"),e.StripHTML&&String(r).match(/\r?\n\r?\n/)&&(r=String(r).replace(/((.+)(\r?\n\r?\n|$))/gi,"<p>$2</p>"));for(var s=0;s<r.length;s++){var m=r[s];switch(m){case"<":i===g&&(i=T,c=""),e.StripHTML||(a+=m);break;case">":(i===T||i===S)&&(i=g,"/p"===c.toLowerCase()&&(f++,e.StripHTML&&(a+=" ")),-1===c.indexOf("/")?p.push(c):-1===t.indexOf(c)&&p.pop()),e.StripHTML||(a+=m);break;case" ":i===T&&(i=S),i===g&&(h++,o++),i!==g&&e.StripHTML||(a+=m);break;default:i===g&&o++,i===T&&(c+=m),i!==g&&e.StripHTML||(a+=m)}if(u=r[s+1]||"",n=e.Strict?!0:!m.match(/[a-zA-ZÇ-Ü']/i)||!u.match(/[a-zA-ZÇ-Ü']/i),e.TruncateBy.match(/word(s)?/i)&&e.TruncateLength<=h){a=a.trimRight();break}if(e.TruncateBy.match(/character(s)?/i)&&e.TruncateLength<=o&&n)break;if(e.TruncateBy.match(/paragraph(s)?/i)&&e.TruncateLength===f)break}if(!e.StripHTML&&p.length>0)for(;p.length>0;){var L=p.pop();"!--"!==L&&(a+="</"+L+">")}return s<r.length-1&&(a.match(/<\/p>$/gi)?a=a.replace(/(<\/p>)$/gi,e.Suffix+"$1"):a+=e.Suffix),a.trim()};return"undefined"!=typeof module&&module.exports?module.exports=e:void(r.truncatise=e)}(this);